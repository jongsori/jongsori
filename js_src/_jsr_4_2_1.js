/**
 * Created by Administrator on 2017-08-18.
 */


$(function(){
  //선언부

  $('.photo-list-item-link').on('click', function(e){
    e.preventDefault();
    $(this).next('.popup-wrap').stop().fadeIn(300);
    $('.photo-list-button').addClass('on');

    });

  $('.close-button').on('click',function(){
    $(this).parent('.popup-wrap').stop().fadeOut(300);
    $('.photo-list-button').removeClass('on');
  });




  function init(){
    $('.photo-list').eq(0).css({left : 0});
    $('.photo-list').eq(1).css({left : 850});
    $('.photo-list').eq(2).css({left : -850});
    $('.photo-list').eq(3).css({left : -850});

    //marginControlWrap();
    //paging();
  }

  var currentIndex = 0;
  var nextIndex = 0;

  function moveLeft(){
    if(nextIndex >= $('.photo-list').length){
      nextIndex = 0;
    }

    $('.photo-list').eq(currentIndex).stop().animate({left:-850}, 2000, 'easeOutExpo');
    $('.photo-list').eq(nextIndex).css({left:850}).stop().animate({left:0}, 2000, 'easeOutExpo');

    currentIndex = nextIndex;

    nextIndex++;

    console.log( currentIndex );
  }

  function moveRight(){

    if(nextIndex <= -1) {
      nextIndex = $('.photo-list').length-1;
    }

    $('.photo-list').eq(currentIndex).stop().animate({left : 850}, 2000, 'easeOutExpo');
    $('.photo-list').eq(nextIndex).css({left : -850}).stop().animate({left : 0}, 2000, 'easeOutExpo');

    currentIndex = nextIndex;
    nextIndex--;
  }



  function paging(){

    var imgNumber = $('.photo-list').length;
    for(var i=0; i<imgNumber; i++){
      $('.radio-box').append('<li class="radio-box-item"><a href="#" class="radio-box">' + (i+1) + '</a></li>');
    }
  }



  // 실행부
  init();

  $('.photo-list-button-right').on('click',function(){
    nextIndex = currentIndex + 1;
    if( !$('.photo-list').is(':animated')){
      moveLeft();
    }
  });

  $('.photo-list-button-left').on('click',function(){
    nextIndex = currentIndex - 1;
    if( !$('.photo-list').is(':animated')){
      moveRight();
    }
  });


});